# Generated by Django 5.1.2 on 2025-12-01 13:49

import django.core.validators
import django.db.models.deletion
import uuid
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('empleados', '0001_initial'),
    ]

    operations = [
        migrations.CreateModel(
            name='ConceptoNomina',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('codigo_sat', models.CharField(blank=True, max_length=10)),
                ('codigo_interno', models.CharField(max_length=20, unique=True)),
                ('nombre', models.CharField(max_length=100)),
                ('descripcion', models.TextField(blank=True)),
                ('tipo', models.CharField(choices=[('percepcion', 'Percepción'), ('deduccion', 'Deducción'), ('otro_pago', 'Otro Pago')], max_length=20)),
                ('es_gravable', models.BooleanField(default=True)),
                ('es_integrable_sbc', models.BooleanField(default=True)),
                ('es_fijo', models.BooleanField(default=False)),
                ('es_obligatorio', models.BooleanField(default=False)),
                ('activo', models.BooleanField(default=True)),
                ('orden', models.IntegerField(default=0)),
            ],
            options={
                'verbose_name': 'Concepto de Nómina',
                'verbose_name_plural': 'Conceptos de Nómina',
                'db_table': 'nomina_conceptos',
                'ordering': ['tipo', 'orden', 'nombre'],
            },
        ),
        migrations.CreateModel(
            name='ParametrosIMSS',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('año', models.IntegerField(unique=True)),
                ('uma_diaria', models.DecimalField(decimal_places=2, max_digits=10)),
                ('uma_mensual', models.DecimalField(decimal_places=2, max_digits=10)),
                ('uma_anual', models.DecimalField(decimal_places=2, max_digits=12)),
                ('salario_minimo_general', models.DecimalField(decimal_places=2, max_digits=10)),
                ('salario_minimo_frontera', models.DecimalField(decimal_places=2, max_digits=10)),
                ('tope_sbc_veces_uma', models.IntegerField(default=25)),
                ('porc_enf_mat_obrera', models.DecimalField(decimal_places=4, default=0.004, max_digits=5)),
                ('porc_invalidez_vida_obrera', models.DecimalField(decimal_places=4, default=0.00625, max_digits=5)),
                ('porc_cesantia_vejez_obrera', models.DecimalField(decimal_places=4, default=0.01125, max_digits=5)),
                ('porc_riesgo_trabajo', models.DecimalField(decimal_places=4, default=0.005, max_digits=5)),
                ('porc_enf_mat_patronal', models.DecimalField(decimal_places=4, default=0.0105, max_digits=5)),
                ('porc_invalidez_vida_patronal', models.DecimalField(decimal_places=4, default=0.0175, max_digits=5)),
                ('porc_cesantia_vejez_patronal', models.DecimalField(decimal_places=4, default=0.0315, max_digits=5)),
                ('porc_guarderias', models.DecimalField(decimal_places=4, default=0.01, max_digits=5)),
                ('porc_infonavit', models.DecimalField(decimal_places=4, default=0.05, max_digits=5)),
                ('cuota_fija_enf_mat', models.DecimalField(decimal_places=4, default=0.204, max_digits=5)),
                ('vigente', models.BooleanField(default=False)),
            ],
            options={
                'verbose_name': 'Parámetros IMSS',
                'verbose_name_plural': 'Parámetros IMSS',
                'db_table': 'nomina_parametros_imss',
            },
        ),
        migrations.CreateModel(
            name='PeriodoNomina',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('tipo_periodo', models.CharField(choices=[('semanal', 'Semanal'), ('quincenal', 'Quincenal'), ('mensual', 'Mensual')], max_length=20)),
                ('numero_periodo', models.IntegerField()),
                ('año', models.IntegerField()),
                ('fecha_inicio', models.DateField()),
                ('fecha_fin', models.DateField()),
                ('fecha_pago', models.DateField()),
                ('estado', models.CharField(choices=[('borrador', 'Borrador'), ('calculado', 'Calculado'), ('autorizado', 'Autorizado'), ('pagado', 'Pagado'), ('timbrado', 'Timbrado'), ('cancelado', 'Cancelado')], default='borrador', max_length=20)),
                ('total_percepciones', models.DecimalField(decimal_places=2, default=0, max_digits=14)),
                ('total_deducciones', models.DecimalField(decimal_places=2, default=0, max_digits=14)),
                ('total_neto', models.DecimalField(decimal_places=2, default=0, max_digits=14)),
                ('total_empleados', models.IntegerField(default=0)),
                ('fecha_calculo', models.DateTimeField(blank=True, null=True)),
                ('fecha_autorizacion', models.DateTimeField(blank=True, null=True)),
            ],
            options={
                'verbose_name': 'Periodo de Nómina',
                'verbose_name_plural': 'Periodos de Nómina',
                'db_table': 'nomina_periodos',
                'ordering': ['-año', '-numero_periodo'],
            },
        ),
        migrations.CreateModel(
            name='ReciboNomina',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('estado', models.CharField(choices=[('borrador', 'Borrador'), ('calculado', 'Calculado'), ('timbrado', 'Timbrado'), ('cancelado', 'Cancelado')], default='borrador', max_length=20)),
                ('salario_diario', models.DecimalField(decimal_places=2, max_digits=10)),
                ('salario_base_cotizacion', models.DecimalField(decimal_places=2, max_digits=10)),
                ('dias_trabajados', models.IntegerField(default=15)),
                ('dias_pagados', models.IntegerField(default=15)),
                ('total_percepciones', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('total_percepciones_gravadas', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('total_percepciones_exentas', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('total_deducciones', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('total_otros_pagos', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('neto_a_pagar', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('base_gravable_isr', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('isr_antes_subsidio', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('subsidio_aplicado', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('isr_retenido', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('cuota_imss_obrera', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('uuid_cfdi', models.CharField(blank=True, max_length=36)),
                ('fecha_timbrado', models.DateTimeField(blank=True, null=True)),
                ('xml_cfdi', models.TextField(blank=True)),
                ('pdf_cfdi', models.TextField(blank=True)),
                ('fecha_pago_real', models.DateField(blank=True, null=True)),
                ('referencia_pago', models.CharField(blank=True, max_length=50)),
            ],
            options={
                'verbose_name': 'Recibo de Nómina',
                'verbose_name_plural': 'Recibos de Nómina',
                'db_table': 'nomina_recibos',
                'ordering': ['-periodo__año', '-periodo__numero_periodo'],
            },
        ),
        migrations.CreateModel(
            name='TablaISR',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('año', models.IntegerField()),
                ('periodicidad', models.CharField(choices=[('mensual', 'Mensual'), ('quincenal', 'Quincenal'), ('semanal', 'Semanal'), ('diario', 'Diario')], max_length=20)),
                ('limite_inferior', models.DecimalField(decimal_places=2, max_digits=12)),
                ('limite_superior', models.DecimalField(decimal_places=2, max_digits=12)),
                ('cuota_fija', models.DecimalField(decimal_places=2, max_digits=12)),
                ('porcentaje_excedente', models.DecimalField(decimal_places=2, max_digits=5, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)])),
            ],
            options={
                'verbose_name': 'Tabla ISR',
                'verbose_name_plural': 'Tablas ISR',
                'db_table': 'nomina_tabla_isr',
                'ordering': ['año', 'periodicidad', 'limite_inferior'],
            },
        ),
        migrations.CreateModel(
            name='TablaSubsidio',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('año', models.IntegerField()),
                ('periodicidad', models.CharField(choices=[('mensual', 'Mensual'), ('quincenal', 'Quincenal'), ('semanal', 'Semanal'), ('diario', 'Diario')], max_length=20)),
                ('limite_inferior', models.DecimalField(decimal_places=2, max_digits=12)),
                ('limite_superior', models.DecimalField(decimal_places=2, max_digits=12)),
                ('subsidio', models.DecimalField(decimal_places=2, max_digits=12)),
            ],
            options={
                'verbose_name': 'Tabla Subsidio',
                'verbose_name_plural': 'Tablas Subsidio',
                'db_table': 'nomina_tabla_subsidio',
            },
        ),
        migrations.CreateModel(
            name='DetalleReciboNomina',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('cantidad', models.DecimalField(decimal_places=2, default=1, max_digits=10)),
                ('valor_unitario', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('importe_gravado', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('importe_exento', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('importe_total', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('observaciones', models.CharField(blank=True, max_length=200)),
                ('concepto', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='detalles_recibo', to='nomina.conceptonomina')),
            ],
            options={
                'verbose_name': 'Detalle de Recibo',
                'verbose_name_plural': 'Detalles de Recibo',
                'db_table': 'nomina_detalle_recibos',
            },
        ),
        migrations.CreateModel(
            name='IncidenciaNomina',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('tipo', models.CharField(choices=[('falta', 'Falta'), ('incapacidad', 'Incapacidad'), ('vacaciones', 'Vacaciones'), ('permiso_cg', 'Permiso con goce'), ('permiso_sg', 'Permiso sin goce'), ('horas_extra', 'Horas extra'), ('bono', 'Bono'), ('comision', 'Comisión'), ('descuento', 'Descuento'), ('prestamo', 'Préstamo'), ('otro', 'Otro')], max_length=20)),
                ('fecha_inicio', models.DateField()),
                ('fecha_fin', models.DateField(blank=True, null=True)),
                ('cantidad', models.DecimalField(decimal_places=2, default=1, max_digits=10)),
                ('monto', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True)),
                ('folio_incapacidad', models.CharField(blank=True, max_length=20)),
                ('tipo_incapacidad', models.CharField(blank=True, max_length=50)),
                ('descripcion', models.TextField(blank=True)),
                ('aplicado', models.BooleanField(default=False)),
                ('empleado', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='incidencias', to='empleados.empleado')),
            ],
            options={
                'verbose_name': 'Incidencia',
                'verbose_name_plural': 'Incidencias',
                'db_table': 'nomina_incidencias',
                'ordering': ['-fecha_inicio'],
            },
        ),
    ]
